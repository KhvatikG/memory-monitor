# Мониторинг использования памяти с отправкой уведомлений

## Описание

MemoryChecker — это скрипт на Python, предназначенный для мониторинга использования оперативной памяти системы. При превышении заданного порога использования памяти скрипт автоматически отправляет уведомление на указанный API-эндпоинт.

## Возможности

- Периодическая проверка использования оперативной памяти.
- Отправка POST-запроса с уведомлением при превышении заданного критического уровня.
- Гибкая настройка порога критического уровня памяти и частоты проверок.
- Логирование событий и ошибок для упрощения диагностики.

## Требования

- Python 3.6 или выше.
- Установленные пакеты:

  - psutil — для получения информации об использовании памяти.
  - requests — для отправки HTTP-запросов.

## Установка

1. Склонируйте репозиторий или скачайте скрипт memory_checker.py.

2. Установите необходимые зависимости с помощью pip:

   
   pip install -r requirements.txt
   

   Содержимое requirements.txt:

   
   psutil
   requests
   

## Настройка

Перед запуском скрипта необходимо настроить следующие параметры:

- ENDPOINT_URL: Строка с URL-адресом API-эндпоинта, на который будут отправляться уведомления.

- CRITICAL_VALUE_IN_PERCENT: Целое число, представляющее критический порог использования памяти в процентах. Например, 70 означает 70%.

- SLIP_TIME: Целое число, представляющее интервал между проверками памяти в секундах.

Пример настройки в коде:


# Эндпоинт для отправки уведомления
ENDPOINT_URL: str = "https://example.com/api/memory-alert"

# Критическое значение памяти, при котором отправляется уведомление
CRITICAL_VALUE_IN_PERCENT: int = 70

# Частота проверки памяти в секундах
SLIP_TIME = 3


## Использование

1. Убедитесь, что все зависимости установлены и настройки произведены.

2. Запустите скрипт командой:

   
   python memory_checker.py
   

3. Скрипт начнет периодически проверять использование оперативной памяти и будет выводить информацию о своей работе в консоль.

4. При превышении критического уровня использования памяти скрипт отправит уведомление на указанный эндпоинт и выведет соответствующее сообщение в лог.

## Формат уведомления

Уведомление отправляется методом POST в формате JSON. Пример содержимого уведомления:


{
  "message": "memory_limit_alarm",
  "mem_usage_percent": 75.2
}


Где:

- message: Тип сообщения (memory_limit_alarm).
- mem_usage_percent: Текущее использование памяти в процентах.

## Логирование

Скрипт использует модуль logging для записи событий. Логи включают информацию об отправке уведомлений, возникших ошибках и другие важные события.

Уровень логирования по умолчанию установлен на DEBUG. Вы можете изменить уровень логирования, отредактировав настройку в скрипте:


logging.basicConfig(level=logging.INFO)


## Обработка ошибок

Скрипт включает обработку возможных ошибок:

- Проверка успешности отправки уведомления (статус код ответа сервера).
- Логирование исключений, возникающих при работе скрипта.

## Завершение работы

Для остановки скрипта нажмите сочетание клавиш Ctrl+C. При этом скрипт корректно завершит работу и выведет сообщение о завершении.
